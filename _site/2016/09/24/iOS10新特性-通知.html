<!DOCTYPE html>
<html>
<head><!-- post -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iOS10æ–°ç‰¹æ€§ - é€šçŸ¥ - Stay True</title>
    <meta name="author"  content="Ju Liaoyuan">
    <meta name="description" content="iOS10æ–°ç‰¹æ€§ - é€šçŸ¥">
    <meta name="keywords"  content="iOS">
    <!-- Open Graph -->
    <meta property="og:title" content="iOS10æ–°ç‰¹æ€§ - é€šçŸ¥ - Stay True">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://localhost:4000/2016/09/24/iOS10%E6%96%B0%E7%89%B9%E6%80%A7-%E9%80%9A%E7%9F%A5.html">
    <meta property="og:description" content="iOS æ¬ç –ï¼Œä¸šä½™å¤©æ–‡çˆ±å¥½è€…">
    <meta property="og:site_name" content="Stay True">
    <link rel="stylesheet" href="//cdn.staticfile.org/normalize/6.0.0/normalize.min.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_roc50gemkxpw4s4i.css">
    <link rel="stylesheet" href= "/assets/css/github-markdown.css" | prepend: site.baseurl >
    <link rel="stylesheet" href="/assets/css/styles/default.css" | prepend: site.baseurl>
    <link rel="stylesheet" href= "/assets/css/share.min.css"  | prepend: site.baseurl>
    <link rel="stylesheet" href= "/assets/css/app.min.css" | prepend: site.baseurl >

    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/img/favicon.ico">
</head>
<body>
    <!--[if lt IE 10]>
<div class="alert-danger" role="alert">ä½ çš„æµè§ˆå™¨å®åœ¨å¤ªå¤ªå¤ªæ—§äº†ï¼Œæ”¾å­¦åˆ«èµ°ï¼Œå‡çº§å®Œæµè§ˆå™¨å†è¯´ï¼<a target="_blank" class="alert-link" href="http://browsehappy.com">ç«‹å³å‡çº§</a></div>
<![endif]-->
<input id="nm-switch" type="hidden" value="false">

<header class="g-header">
    <div class="g-logo">
        <a href="/"></a>
    </div>
    <i id="menu-toggle" class="iconfont icon-menu"></i>
    <nav class="g-nav">
        <ul>
            
            <li><a href="/">home</a></li>
            
            <li><a href="/tags.html">tags</a></li>
            
        </ul>
    </nav>
</header>

<header class="g-banner post-header post-pattern-circuitBoard bgcolor-default " data-theme="default">
    <div class="post-wrapper">
        <div class="post-tags">
             
            
            <a href="/tags#iOS" class="post-tag">iOS</a>
            
            
        </div>
        <h1>iOS10æ–°ç‰¹æ€§ - é€šçŸ¥</h1>
        <div class="post-meta">
            <span class="post-meta-item"><i class="iconfont icon-author"></i><a href="http://localhost:4000" target="_blank" rel="author">Ju Liaoyuan</a></></span>
            <time class="post-meta-item" datetime="16-09-24"><i class="iconfont icon-date"></i>25 Sep 2016</time>
        </div>
    </div>
    
    <div class="filter"></div>
    <div class="post-cover" style="background: url('https://leo-1253441258.cos.ap-shanghai.myqcloud.com/blog/ios10.png') center no-repeat; background-size: cover;">
    
</header>

<div class="post-content">
    
    <article class="markdown-body">
        <p>iOS 10 ä¸­ï¼Œè‹¹æœå¯¹é€šçŸ¥è¿›è¡Œäº†è¾ƒå¤§çš„æ›´æ–°ã€‚åˆæœ‰çš„ç©äº†ã€‚</p>

<!--more-->
<p>æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥æ¢ç´¢ä¸‹iOS 10 ä¸­ï¼Œé€šçŸ¥é‚£äº›äº‹ã€‚</p>

<p><em>è¿™é‡Œä¸ä¼šè®²é€šçŸ¥çš„åŸç†ï¼Œè¯ä¹¦çš„åˆ›å»ºï¼Œå‡è®¾ä½ å·²ç»çŸ¥é“å‰é¢çš„æµç¨‹</em></p>

<p>å…ˆä¸‹è½½<a href="https://github.com/Stu-JuLiaoY/iOS10NewNotification">Demo</a>,é˜…è¯»æ›´ä½³ã€‚</p>

<h2 id="æ³¨å†Œé€šçŸ¥">æ³¨å†Œé€šçŸ¥</h2>
<p>åœ¨iOS 10 ä¹‹å‰ï¼Œæˆ‘ä»¬æ³¨å†Œé€šçŸ¥ä¼šåƒä¸‹é¢ä¸€æ ·ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// æ³¨å†Œè¿œç¨‹é€šçŸ¥
UIUserNotificationSettings *notiSettings = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeBadge | UIUserNotificationTypeAlert | UIRemoteNotificationTypeSound categories:nil];
[application registerUserNotificationSettings:notiSettings];
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// æ³¨å†Œæœ¬åœ°é€šçŸ¥
UILocalNotification *localNotification = [[UILocalNotification alloc] init];
// something setting.... BlaBla~
[application scheduleLocalNotification:localNotification];
</code></pre></div></div>
<p>ç„¶ååœ¨<code class="highlighter-rouge">didRegisterForRemoteNotificationsWithDeviceTokenï¼š</code>ä¸Šä¼ Tokenï¼Œåœ¨<code class="highlighter-rouge">didReceiveRemoteNotification:</code>é‡Œé¢å¤„ç†ç›¸å…³é€»è¾‘ã€‚è€Œåœ¨iOS 10 é‡Œé¢ï¼ŒAPIå¾—åˆ°äº†ç»Ÿä¸€ã€‚æ³¨å†Œé€šçŸ¥å¦‚ä¸‹ï¼ˆè®°å¾—å¯¼å…¥ç³»ç»Ÿå¤´æ–‡ä»¶ï¼š<code class="highlighter-rouge">&lt;UserNotifications/UserNotifications.h&gt;</code>ï¼‰ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// åœ¨ didFinishLaunchingWithOptionsï¼š
UNUserNotificationCenter *notification = [UNUserNotificationCenter currentNotificationCenter];
notification.delegate = self;
[notification requestAuthorizationWithOptions:UNAuthorizationOptionBadge | UNAuthorizationOptionAlert | UNAuthorizationOptionSound completionHandler:^(BOOL granted, NSError * _Nullable error) { 
    }];
</code></pre></div></div>
<h2 id="åˆ›å»ºé€šçŸ¥å†…å®¹">åˆ›å»ºé€šçŸ¥å†…å®¹</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UNMutableNotificationContent *content = [UNMutableNotificationContent new];
content.badge = @1;
content.title = @"liaoyuan test title";
content.body = @"liaoyuan test body";
content.subtitle = @"liaoyuan test subtitle";
content.categoryIdentifier = categoryIdentifier; // å¾ˆé‡è¦
content.launchImageName = @"launchImage.png";
content.sound = [UNNotificationSound defaultSound];
content.threadIdentifier = threadIdentifier;
content.userInfo = @{@"name":@"liaoyuan"};  
UNTimeIntervalNotificationTrigger *trigger = [UNTimeIntervalNotificationTrigger triggerWithTimeInterval:3.f repeats:NO];
NSURL *url = [[NSBundle mainBundle] URLForResource:@"1" withExtension:@"jpg"];
NSError *error = nil;
NSURL *url = [[NSBundle mainBundle] URLForResource:@"1" withExtension:@"png"];
    NSDictionary *options = @{UNNotificationAttachmentOptionsTypeHintKey:(NSString *)kUTTypeImage};
    UNNotificationAttachment *attachment = [UNNotificationAttachment attachmentWithIdentifier:attachmentIdentifie URL:url options:options error:nil];content.attachments = @[attachment];
UNNotificationRequest *request = [UNNotificationRequest requestWithIdentifier:requestIdentifier content:content trigger:trigger];
    self.request = request;
</code></pre></div></div>

<p>å…¶ä¸­ï¼š</p>
<h3 id="categoryidentifier">CategoryIdentifier</h3>
<p><code class="highlighter-rouge">categoryIdentifier</code>æ˜¯ç”¨æ¥ç»™é€šçŸ¥æ·»åŠ actionçš„æ ‡å¿—ç¬¦ï¼Œåœ¨åé¢æœ‰ä»‹ç»ã€‚</p>

<h3 id="unnotificationtrigger">UNNotificationTrigger</h3>
<p><code class="highlighter-rouge">UNTimeIntervalNotificationTrigger</code> æ˜¯iOS 10 ä¸­æ–°åŠ å…¥çš„APIã€‚æ˜¯é€šçŸ¥çš„è§¦å‘å™¨ã€‚iOS 10 ä¸­ä¸€å…±æœ‰ä¸‰ä¸ªç±»ä¼¼çš„APIï¼Œåˆ†åˆ«æ˜¯ï¼š
<code class="highlighter-rouge">UNTimeIntervalNotificationTrigger</code>,	// ä¸€æ®µæ—¶é—´ä¹‹åå‘é€é€šçŸ¥
<code class="highlighter-rouge">UNCalendarNotificationTrigger</code>,		// æŒ‡å®šæ—¥æœŸå‘é€é€šçŸ¥
<code class="highlighter-rouge">UNLocationNotificationTrigger</code>ã€‚		// è¿›å…¥æˆ–ç¦»å¼€æŸä¸€åŒºåŸŸå‘é€é€šçŸ¥</p>

<p>Tip:
å¦‚æœè¦è®¾ç½®é‡å¤æé†’çš„è¯ï¼Œæ—¶é—´é—´éš”å¿…é¡»å¤§äº60Sï¼Œè¦ä¸ç„¶ä¼šå´©æºƒã€‚</p>

<h3 id="unnotificationattachment">UNNotificationAttachment</h3>
<p><code class="highlighter-rouge">UNNotificationAttachment</code>æ˜¯ä¸€ä¸ªç»™é€šçŸ¥æ·»åŠ é™„ä»¶çš„APIï¼Œæˆ‘è¿™é‡Œç»™å®ƒæ·»åŠ äº†ä¸€å¼ å›¾ç‰‡ï¼Œæ³¨æ„ï¼Œåˆå§‹åŒ–æ–¹æ³•é‡Œé¢çš„<code class="highlighter-rouge">URL</code>å¿…é¡»æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ã€‚</p>

<blockquote>
  <p>URL must be a file URL. Returns nil if the data at URL is not supported. â€“ Apple</p>
</blockquote>

<p>å…¶ä¸­çš„<code class="highlighter-rouge">options</code>,æˆ‘ä»¬ç‚¹è¿›<code class="highlighter-rouge">UNNotificationAttachment</code>å¤´æ–‡ä»¶ï¼Œå‘ç°åœ¨å¤´æ–‡ä»¶ä¸‹é¢æœ‰å››ä¸ª<code class="highlighter-rouge">ertern key</code>
<img src="https://leo-1253441258.cos.ap-shanghai.myqcloud.com/blog/keys.png" alt="keys" /></p>

<p>åˆ†åˆ«æŒ‡å®š<code class="highlighter-rouge">Attachment</code>çš„:<em>ç±»å‹</em>ï¼Œ<em>æ˜¯å¦éšè—</em>ï¼Œ<em>ç¼©ç•¥å›¾çš„èŒƒå›´ï¼ˆCGRectï¼‰</em>ï¼Œ<em>å¦‚æœTepyæ˜¯Movieï¼Œåˆ™æŒ‡å®šæ—¶é—´å¯¹åº”çš„å›¾åƒæ¥ä½œä¸ºç¼©ç•¥å›¾</em>ã€‚</p>

<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œæ¥æŒ‡å®šç¼©ç•¥å›¾çš„å±æ€§ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NSDictionary *options = @{UNNotificationAttachmentOptionsTypeHintKey:(NSString *)kUTTypeGIF,
                              UNNotificationAttachmentOptionsThumbnailHiddenKey:@NO,
                              UNNotificationAttachmentOptionsThumbnailClippingRectKey:NSStringFromCGRect(CGRectMake(0, 0, 0.5, 0.5))};
</code></pre></div></div>
<p>Tips:</p>

<ol>
  <li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äº<code class="highlighter-rouge">kUTTypeGIF</code>,æˆ‘ä»¬éœ€è¦å¯¼å›¾å¤´æ–‡ä»¶ï¼š<code class="highlighter-rouge">&lt;MobileCoreServices/MobileCoreServices.h&gt;</code>æ‰èƒ½ä½¿ç”¨<a href="http://stackoverflow.com/questions/24471647/use-of-undeclared-identifier-even-though-framework-linked-and-header-file-impo">Use of undeclared identifier</a>;å¦‚æœä¸è®¾ç½®ï¼Œç³»ç»Ÿä¼šæ ¹æ®åç¼€åè‡ªåŠ¨æ¨æ–­æ–‡ä»¶ç±»å‹ã€‚</li>
  <li>UNNotificationAttachmentOptionsThumbnailClippingRectKey è²Œä¼¼åªå¯¹é™æ€å›¾ç‰‡æœ‰æ•ˆï¼Œæˆ‘åœ¨å®éªŒçš„æ—¶å€™ï¼Œå‘ç°GIFçš„ç¼©ç•¥å›¾ä¸èƒ½æŒ‡å®šèŒƒå›´ã€‚å¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤æ˜¯å±…ä¸­çš„ã€‚</li>
</ol>

<h2 id="åˆ›å»ºé€šçŸ¥è¯·æ±‚">åˆ›å»ºé€šçŸ¥è¯·æ±‚</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UNNotificationRequest *request = [UNNotificationRequest requestWithIdentifier:requestIdentifier content:content trigger:trigger];
</code></pre></div></div>

<h2 id="å‘é€é€šçŸ¥">å‘é€é€šçŸ¥</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UNUserNotificationCenter *notification = [UNUserNotificationCenter currentNotificationCenter];
    [notification addNotificationRequest:request withCompletionHandler:^(NSError * _Nullable error) {
}];
</code></pre></div></div>

<p>è‡³æ­¤ï¼Œä¸€ä¸ªå®Œæ•´çš„æ¨é€é€šçŸ¥å·²ç»åˆ›å»ºå®Œæ¯•ï¼Œå¹¶ä¸”å·²ç»å‘é€ã€‚</p>

<h2 id="å¤„ç†é€šçŸ¥">å¤„ç†é€šçŸ¥</h2>

<p>åœ¨iOS 10 ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬çš„Appåœ¨å‰å°ï¼Œæˆ‘ä»¬æ”¶åˆ°çš„é€šçŸ¥æ˜¯æ— æ³•å±•ç¤ºçš„ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨<code class="highlighter-rouge">didReceiveRemoteNotification</code>é‡Œé¢åšä¸€äº›å¤„ç†ã€‚ä½†æ˜¯ï¼Œåœ¨iOS 10 ï¼Œè¿™ä»¶äº‹å˜å¾—æ— æ¯”ç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨<code class="highlighter-rouge">userNotificationCenter: willPresentNotification: withCompletionHandler:</code>é‡Œé¢ï¼Œå†™ä¸Šæˆ‘ä»¬æƒ³è¦å±•ç¤ºçš„ï¼Œæ¯”å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>completionHandler(UNNotificationPresentationOptionBadge | UNNotificationPresentationOptionAlert | UNNotificationPresentationOptionSound);
</code></pre></div></div>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å‰å°ä¹Ÿå±•ç¤ºé€šçŸ¥äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ˜¯<code class="highlighter-rouge">UNUserNotificationCenterDelegate</code>çš„ä»£ç†æ–¹æ³•ï¼Œæˆ‘ä»¬è¦è®°å¾—å»ºç«‹ä»£ç†å…³ç³»ï¼Œå¹¶ä¸”ç»§æ‰¿åè®®ã€‚</p>

<p>å½“ç”¨æˆ·ç‚¹å‡»é€šçŸ¥è¿›å…¥Appçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨<code class="highlighter-rouge">userNotificationCenter: didReceiveNotificationResponse: withCompletionHandler:</code>æ–¹æ³•ã€‚æˆ‘ä»¬åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢å¯ä»¥è½»æ¾è·å–åˆ°é€šçŸ¥çš„æ‰€æœ‰å†…å®¹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>response.notification.request.content.userInfo;
</code></pre></div></div>

<h2 id="æ›´æ–°åˆ é™¤é€šçŸ¥">æ›´æ–°ã€åˆ é™¤é€šçŸ¥</h2>

<p>è¿™æ˜¯iOS 10 é€šçŸ¥çš„ä¸€å¤§æ–°ç‰¹æ€§ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡<code class="highlighter-rouge">requestIdentifier</code>æ›´æ–°ã€åˆ é™¤ï¼ˆå·²ç»å±•ç¤ºå’Œæœªå±•ç¤ºï¼‰é€šçŸ¥.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// æ›´æ–°é€šçŸ¥
UNMutableNotificationContent *content = [UNMutableNotificationContent new];
content.badge = @1;
content.title = @"liaoyuan update title";
content.body = @"liaoyuan update body";
content.subtitle = @"liaoyuan update subtitle";
content.categoryIdentifier = categoryIdentifier;
content.launchImageName = @"launchImage.png";
content.sound = [UNNotificationSound defaultSound];
content.threadIdentifier = threadIdentifier;
content.userInfo = @{@"name":@"liaoyuan"}; 

UNTimeIntervalNotificationTrigger *trigger = [UNTimeIntervalNotificationTrigger triggerWithTimeInterval:3.f repeats:NO];

NSURL *url = [[NSBundle mainBundle] URLForResource:@"launchImage" withExtension:@"png"];
NSError *error = nil;
UNNotificationAttachment *attachment = [UNNotificationAttachment attachmentWithIdentifier:attachmentIdentifie URL:url options:nil error:&amp;error];

content.attachments = @[attachment];    

UNNotificationRequest *newRequest = [UNNotificationRequest requestWithIdentifier:requestIdentifier content:content trigger:trigger];
UNUserNotificationCenter *newNotification = [UNUserNotificationCenter currentNotificationCenter];
[newNotification addNotificationRequest:newRequest withCompletionHandler:^(NSError * _Nullable error) {        
}];
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ç§»é™¤è¿˜æœªå±•ç¤ºçš„é€šçŸ¥
UNUserNotificationCenter *notification = [UNUserNotificationCenter currentNotificationCenter];
    [notification removePendingNotificationRequestsWithIdentifiers:@[requestIdentifier]];
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ç§»é™¤å·²ç»å±•ç¤ºçš„é€šçŸ¥(é€šçŸ¥æ æ¸…é™¤æ‰è¯¥é€šçŸ¥)
UNUserNotificationCenter *notification = [UNUserNotificationCenter currentNotificationCenter];
    [notification removeDeliveredNotificationsWithIdentifiers:@[requestIdentifier]];
</code></pre></div></div>

<p>Tipsï¼š æˆ‘ä»¬ç°åœ¨è¿˜ä¸èƒ½åƒæœ¬åœ°æ¨é€ä¸€æ ·ï¼Œå–æ¶ˆè¿œç¨‹æ¨é€ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>

<blockquote>
  <p>ç°åœ¨å¦‚æœæƒ³è¦æ¶ˆé™¤ä¸€ä¸ªè¿œç¨‹æ¨é€ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨åå°é™é»˜æ¨é€çš„æ–¹å¼æ¥ä»æœ¬åœ°å‘èµ·ä¸€ä¸ªåˆ é™¤é€šçŸ¥çš„è°ƒç”¨        â€“ å¼•è‡ªçš„å–µç¥çš„<a href="https://onevcat.com/2016/08/notification/">æ´»ä¹…è§çš„é‡æ„ - iOS 10 UserNotifications æ¡†æ¶è§£æ</a>.</p>
</blockquote>

<h2 id="ç»™é€šçŸ¥æ·»åŠ action-button">ç»™é€šçŸ¥æ·»åŠ Action Button</h2>
<p>è¿™ä¸ªå¹¶ä¸æ˜¯iOS 10 çš„æ–°ç‰¹æ€§ï¼Œåªæ˜¯ä»‹ç»ä¸‹åœ¨æ–°çš„APIä¸‹ï¼Œè¯¥æ€ä¹ˆç”¨ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> // æ·»åŠ Action
    UNNotificationAction *sayHelloAction = [UNNotificationAction actionWithIdentifier:JLYNotificationSayHelloID title:@"ä½ å¥½" options:UNNotificationActionOptionForeground];
    UNTextInputNotificationAction *textInput = [UNTextInputNotificationAction actionWithIdentifier:JLYNotificationInputID title:@"è¯„è®ºä¸€ä¸ª" options:UNNotificationActionOptionForeground textInputButtonTitle:@"è¯„è®º" textInputPlaceholder:@"è¯„è®ºä¸€ä¸ª"];
    
    UNNotificationAction *cancelAction = [UNNotificationAction actionWithIdentifier:JLYNotificationCancelID title:@"å–æ¶ˆ" options:UNNotificationActionOptionDestructive];
    
    UNNotificationCategory *notiCategory = [UNNotificationCategory categoryWithIdentifier:categoryIdentifier actions:@[sayHelloAction,textInput,cancelAction] intentIdentifiers:@[] options:UNNotificationCategoryOptionCustomDismissAction];
    
    UNUserNotificationCenter *notification = [UNUserNotificationCenter currentNotificationCenter];
    NSSet *set = [[NSSet alloc] initWithObjects:notiCategory, nil];
    [notification setNotificationCategories:set];
</code></pre></div></div>

<p>æˆ‘ä»¬å¯ä»¥åœ¨ <code class="highlighter-rouge">didReceiveNotificationResponse</code> é‡Œé¢é€šè¿‡ <code class="highlighter-rouge">ActionIdentifier</code> åˆ¤æ–­ç”¨æˆ·ç‚¹å‡»äº†å“ªä¸ªæŒ‰é’®ã€‚åšå‡ºå¯¹åº”çš„å¤„ç†ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> NSString *categoryIdentifier = response.actionIdentifier;
    if ([categoryIdentifier isEqualToString:JLYNotificationInputID]) {
        
        UNTextInputNotificationResponse *action = (UNTextInputNotificationResponse *)response;
        [PEEAlertView showAlertWithTitle:@"è¾“å…¥çš„å†…å®¹ä¸º:" message:action.userText actionTitle:@"ç¡®å®š"];
    }
    if ([categoryIdentifier isEqualToString:JLYNotificationSayHelloID]) {
        [PEEAlertView showAlertWithTitle:@"Hello" message:@"" actionTitle:@"OK"];
    }
    if ([categoryIdentifier isEqualToString:JLYNotificationCancelID]) {
        NSLog(@"cancel");
    }

</code></pre></div></div>

<h2 id="è‡ªå®šä¹‰notification-ui">è‡ªå®šä¹‰Notification UI</h2>
<p>åˆ›å»º<code class="highlighter-rouge">Notification Content</code>: File -&gt; New -&gt; Target -&gt; Notification Content.
ç„¶åï¼Œå°±ä¼šçœ‹åˆ°ç³»ç»Ÿä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆäº†å››ä¸ªæ–‡ä»¶ï¼š
<em>NotificationViewController.h</em>
<em>NotificationViewController.m</em>
<em>MainInterface.storyboard</em>
<em>info.plist</em></p>

<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦åœ¨info.plisté‡Œé¢æ‰¾åˆ°<code class="highlighter-rouge">NSExtension</code>,é‡Œé¢æœ‰ä¸ª<code class="highlighter-rouge">NSExtensionAttributes</code>,ç±»å‹ä¸ºå­—å…¸ï¼Œç„¶åä¸‹ä¸€çº§ï¼Œæ‰¾åˆ°<code class="highlighter-rouge">UNNotificationExtensionCategory</code>,ç±»å‹ä¸ºStringï¼ŒæŠŠè¿™ä¸ªè®¾ç½®ä¸ºå’Œ<code class="highlighter-rouge">categoryIdentifier</code>ä¸€è‡´ã€‚<code class="highlighter-rouge">UNNotificationExtensionInitialContentSizeRatio</code>è¿™ä¸ªæ˜¯è‡ªå®šä¹‰è§†å›¾çš„å¤§å°æ¯”ä¾‹ã€‚æ ¹æ®éœ€è¦å»è®¾ç½®ã€‚</p>

<p>ç„¶åï¼Œå†æ¬¡å‘é€é€šçŸ¥ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ã€‚</p>

<h2 id="notificationservice-extension">NotificationService Extension</h2>
<p>ä»…æ”¯æŒè¿œç¨‹æ¨é€ï¼ŒæŒ–ä¸ªå‘ï¼Œå¾…å¡«ã€‚</p>

<h2 id="refrence">Refrence</h2>

<p>å¤§é‡å‚è€ƒäº†å–µç¥çš„<a href="https://onevcat.com/2016/08/notification/">æ´»ä¹…è§çš„é‡æ„ - iOS 10 UserNotifications æ¡†æ¶è§£æ</a>.</p>

<h2 id="demo">Demo</h2>

<p>æœ¬æ–‡çš„Demoå¯ä»¥åœ¨<a href="https://github.com/Stu-JuLiaoY/iOS10NewNotification">è¿™é‡Œ</a>ä¸‹è½½ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“ï¼š</h2>
<p>æ„Ÿè§‰iOS 10 çš„é€šçŸ¥æ¨é€åŠŸèƒ½å®åœ¨æ˜¯å¤ªå¼ºå¤§äº†ï¼Œå¯æŒ–æ˜çš„å¾ˆæ·±ï¼Œå°±çœ‹å„ä¸ªäº§å“ç»ç†æ€ä¹ˆç©äº†ã€‚ä»…ä»…ä¸€ä¸ªå°Demoï¼Œå°±è®©æˆ‘æ„Ÿè§‰ä»¥åçš„Appæ¨é€ä¼šç©å‡ºèŠ±æ¥ï¼Œæ¯”å¦‚ï¼šè§†é¢‘ç±»ç½‘ç«™ï¼Œå¯ä»¥æ¨é€å°è§†é¢‘ï¼Œè€Œä¸åœ¨æ˜¯æ¯ç‡¥çš„æ–‡å­—ï¼›éŸ³ä¹ç±»Appï¼Œæ¯æ—¥æ¨èä¹Ÿå¯ä»¥é€‰æ‹©ä¸€æ®µéŸ³ä¹æ¥æ¿€æ´»ç”¨æˆ·ã€‚æœ€æœ€æœ€é‡è¦çš„æ˜¯ï¼Œ<strong>ç¨‹åºçŒ¿åˆæœ‰äº†æ–°çš„è¡¨ç™½ç¥å™¨ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</strong>ã€‚ç¡è§‰zZ~</p>


    </article>
    
    <div class="social-share-wrapper">
        <div class="social-share"></div>
    </div>
    
</div>

<section class="author-detail">
    <section class="post-footer-item author-card">
        <div class="avatar">
            <img src="/assets/img/profile.png" alt="">
        </div>
        <div class="author-name" rel="author">Ju Liaoyuan</div>
        <div class="bio">
            <p>iOS æ¬ç –ï¼Œä¸šä½™å¤©æ–‡çˆ±å¥½è€…</p>
        </div>
        
        <ul class="sns-links">
            
            <li>
                <a href="//weibo.com/u/2738809475" target="_blank">
                    <i class="iconfont icon-weibo"></i>
                </a>
            </li>
            
            <li>
                <a href="//juejin.im/user/5872f9822f301e0057490c89" target="_blank">
                    <i class="iconfont icon-juejin"></i>
                </a>
            </li>
            
            <li>
                <a href="//github.com/liaoyuanng" target="_blank">
                    <i class="iconfont icon-github"></i>
                </a>
            </li>
            
            <li>
                <a href="//jianshu.com/u/f386d4a61d33" target="_blank">
                    <i class="iconfont icon-jianshu"></i>
                </a>
            </li>
            
            <li>
                <a href="mailto:liaoyuan@imliaoyuan.com" target="_blank">
                    <i class="iconfont icon-email"></i>
                </a>
            </li>
            
        </ul>
        
    </section>
    <section class="post-footer-item read-next">
        
        <div class="read-next-item">
            <a href="/2016/10/27/%E8%AE%B0%E4%B8%80%E6%AC%A1Runtime%E7%9A%84%E5%B7%A7%E7%94%A8.html" class="read-next-link"></a>
            <section>
                <span>è®°ä¸€æ¬¡Runtimeçš„å·§ç”¨</span>
                <p></p>
            </section>
            
        </div>
        
         
        <div class="read-next-item">
            <a href="/2016/08/30/%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E6%B7%BB%E5%8A%A0child_view_controller.html" class="read-next-link"></a>
            <section>
                <span>å¦‚ä½•æ­£ç¡®æ·»åŠ Child View Controller</span>
                <p>è¿™æ˜¯ä¸€ä¸ªä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
            </section>
            
        </div>
        
    </section>
    
</section>

<footer class="g-footer">
    <section>Stay True Â© 2018</section>
    <section>Powered by <a href="//jekyllrb.com">Jekyll</a> | <a href="https://github.com/liaoyuanng/StayTrue">Theme StayTrue</a>
    <p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p></section>
</footer>

<script src="/assets/js/social-share.min.js"></script>
<script>
    socialShare('.social-share', {
        sites: ['wechat','weibo','twitter','facebook'],
        wechatQrcodeTitle: "åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ",
        wechatQrcodeHelper: '<p>æ‰«ç ååˆ†äº«ğŸ˜˜</p>'
    });
</script>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
/*å†™å…¥è‡ªå·±çš„disqusä¿¡æ¯*/
s.src = '';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<script src="/assets/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/assets/js/index.min.js"></script>
</body>
</html>